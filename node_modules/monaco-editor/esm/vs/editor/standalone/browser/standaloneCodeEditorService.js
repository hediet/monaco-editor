var __decorate=this&&this.__decorate||function(e,t,o,r){var i,n=arguments.length,c=n<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(c=(n<3?i(c):n>3?i(t,o,c):i(t,o))||c);return n>3&&c&&Object.defineProperty(t,o,c),c},__param=this&&this.__param||function(e,t){return function(o,r){t(o,r,e)}},__awaiter=this&&this.__awaiter||function(e,t,o,r){return new(o||(o=Promise))((function(i,n){function c(e){try{d(r.next(e))}catch(e){n(e)}}function s(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(c,s)}d((r=r.apply(e,t||[])).next())}))};import{windowOpenNoOpener}from"../../../base/browser/dom.js";import{Schemas}from"../../../base/common/network.js";import{AbstractCodeEditorService}from"../../browser/services/abstractCodeEditorService.js";import{ICodeEditorService}from"../../browser/services/codeEditorService.js";import{IContextKeyService}from"../../../platform/contextkey/common/contextkey.js";import{registerSingleton}from"../../../platform/instantiation/common/extensions.js";import{IThemeService}from"../../../platform/theme/common/themeService.js";let StandaloneCodeEditorService=class extends AbstractCodeEditorService{constructor(e,t){super(t),this.onCodeEditorAdd((()=>this._checkContextKey())),this.onCodeEditorRemove((()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this.registerCodeEditorOpenHandler(((e,t,o)=>__awaiter(this,void 0,void 0,(function*(){return t?this.doOpenEditor(t,e):null}))))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===Schemas.http||o===Schemas.https)return windowOpenNoOpener(t.resource.toString()),e}return null}const o=t.options?t.options.selection:null;if(o)if("number"==typeof o.endLineNumber&&"number"==typeof o.endColumn)e.setSelection(o),e.revealRangeInCenter(o,1);else{const t={lineNumber:o.startLineNumber,column:o.startColumn};e.setPosition(t),e.revealPositionInCenter(t,1)}return e}findModel(e,t){const o=e.getModel();return o&&o.uri.toString()!==t.toString()?null:o}};StandaloneCodeEditorService=__decorate([__param(0,IContextKeyService),__param(1,IThemeService)],StandaloneCodeEditorService);export{StandaloneCodeEditorService};registerSingleton(ICodeEditorService,StandaloneCodeEditorService,0);