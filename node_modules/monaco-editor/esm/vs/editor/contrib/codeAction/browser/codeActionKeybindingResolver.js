var __decorate=this&&this.__decorate||function(e,n,o,i){var d,r=arguments.length,t=r<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)t=Reflect.decorate(e,n,o,i);else for(var c=e.length-1;c>=0;c--)(d=e[c])&&(t=(r<3?d(t):r>3?d(n,o,t):d(n,o))||t);return r>3&&t&&Object.defineProperty(n,o,t),t},__param=this&&this.__param||function(e,n){return function(o,i){n(o,i,e)}};import{Lazy}from"../../../../base/common/lazy.js";import{codeActionCommandId,fixAllCommandId,organizeImportsCommandId,refactorCommandId,sourceActionCommandId}from"./codeAction.js";import{CodeActionCommandArgs,CodeActionKind}from"../common/types.js";import{IKeybindingService}from"../../../../platform/keybinding/common/keybinding.js";let CodeActionKeybindingResolver=class e{constructor(e){this.keybindingService=e}getResolver(){const n=new Lazy((()=>this.keybindingService.getKeybindings().filter((n=>e.codeActionCommands.indexOf(n.command)>=0)).filter((e=>e.resolvedKeybinding)).map((e=>{let n=e.commandArgs;return e.command===organizeImportsCommandId?n={kind:CodeActionKind.SourceOrganizeImports.value}:e.command===fixAllCommandId&&(n={kind:CodeActionKind.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},CodeActionCommandArgs.fromUser(n,{kind:CodeActionKind.None,apply:"never"}))}))));return e=>{if(e.kind){const o=this.bestKeybindingForCodeAction(e,n.value);return null==o?void 0:o.resolvedKeybinding}}}bestKeybindingForCodeAction(e,n){if(!e.kind)return;const o=new CodeActionKind(e.kind);return n.filter((e=>e.kind.contains(o))).filter((n=>!n.preferred||e.isPreferred)).reduceRight(((e,n)=>e?e.kind.contains(n.kind)?n:e:n),void 0)}};CodeActionKeybindingResolver.codeActionCommands=[refactorCommandId,codeActionCommandId,sourceActionCommandId,organizeImportsCommandId,fixAllCommandId],CodeActionKeybindingResolver=__decorate([__param(0,IKeybindingService)],CodeActionKeybindingResolver);export{CodeActionKeybindingResolver};