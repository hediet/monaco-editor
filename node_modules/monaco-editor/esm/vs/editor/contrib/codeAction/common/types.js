var __awaiter=this&&this.__awaiter||function(e,n,o,i){return new(o||(o=Promise))((function(t,r){function c(e){try{s(i.next(e))}catch(e){r(e)}}function d(e){try{s(i.throw(e))}catch(e){r(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(c,d)}s((i=i.apply(e,n||[])).next())}))};import{onUnexpectedExternalError}from"../../../../base/common/errors.js";class CodeActionKind{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+CodeActionKind.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new CodeActionKind(this.value+CodeActionKind.sep+e)}}CodeActionKind.sep=".",CodeActionKind.None=new CodeActionKind("@@none@@"),CodeActionKind.Empty=new CodeActionKind(""),CodeActionKind.QuickFix=new CodeActionKind("quickfix"),CodeActionKind.Refactor=new CodeActionKind("refactor"),CodeActionKind.RefactorExtract=CodeActionKind.Refactor.append("extract"),CodeActionKind.RefactorInline=CodeActionKind.Refactor.append("inline"),CodeActionKind.RefactorMove=CodeActionKind.Refactor.append("move"),CodeActionKind.RefactorRewrite=CodeActionKind.Refactor.append("rewrite"),CodeActionKind.Source=new CodeActionKind("source"),CodeActionKind.SourceOrganizeImports=CodeActionKind.Source.append("organizeImports"),CodeActionKind.SourceFixAll=CodeActionKind.Source.append("fixAll"),CodeActionKind.SurroundWith=CodeActionKind.Refactor.append("surround");export{CodeActionKind};export var CodeActionTriggerSource;!function(e){e.Refactor="refactor",e.RefactorPreview="refactor preview",e.Lightbulb="lightbulb",e.Default="other (default)",e.SourceAction="source action",e.QuickFix="quick fix action",e.FixAll="fix all",e.OrganizeImports="organize imports",e.AutoFix="auto fix",e.QuickFixHover="quick fix hover window",e.OnSave="save participants",e.ProblemsView="problems view"}(CodeActionTriggerSource||(CodeActionTriggerSource={}));export function mayIncludeActionsOfKind(e,n){return!(e.include&&!e.include.intersects(n)||e.excludes&&e.excludes.some((o=>excludesAction(n,o,e.include)))||!e.includeSourceActions&&CodeActionKind.Source.contains(n))}export function filtersAction(e,n){const o=n.kind?new CodeActionKind(n.kind):void 0;return!(!(!e.include||o&&e.include.contains(o))||e.excludes&&o&&e.excludes.some((n=>excludesAction(o,n,e.include)))||!e.includeSourceActions&&o&&CodeActionKind.Source.contains(o)||e.onlyIncludePreferredActions&&!n.isPreferred)}function excludesAction(e,n,o){return!(!n.contains(e)||o&&n.contains(o))}export class CodeActionCommandArgs{static fromUser(e,n){return e&&"object"==typeof e?new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(e,n.kind),CodeActionCommandArgs.getApplyFromUser(e,n.apply),CodeActionCommandArgs.getPreferredUser(e)):new CodeActionCommandArgs(n.kind,n.apply,!1)}static getApplyFromUser(e,n){switch("string"==typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return n}}static getKindFromUser(e,n){return"string"==typeof e.kind?new CodeActionKind(e.kind):n}static getPreferredUser(e){return"boolean"==typeof e.preferred&&e.preferred}constructor(e,n,o){this.kind=e,this.apply=n,this.preferred=o}}export class CodeActionItem{constructor(e,n){this.action=e,this.provider=n}resolve(e){var n;return __awaiter(this,void 0,void 0,(function*(){if((null===(n=this.provider)||void 0===n?void 0:n.resolveCodeAction)&&!this.action.edit){let n;try{n=yield this.provider.resolveCodeAction(this.action,e)}catch(e){onUnexpectedExternalError(e)}n&&(this.action.edit=n.edit)}return this}))}}