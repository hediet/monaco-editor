var __decorate=this&&this.__decorate||function(e,t,r,i){var o,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(n<3?o(a):n>3?o(t,r,a):o(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a},__param=this&&this.__param||function(e,t){return function(r,i){t(r,i,e)}};import{Lazy}from"../../../../base/common/lazy.js";import{Disposable}from"../../../../base/common/lifecycle.js";import{EditorAction,EditorCommand,registerEditorAction,registerEditorCommand,registerEditorContribution}from"../../../browser/editorExtensions.js";import{EditorContextKeys}from"../../../common/editorContextKeys.js";import*as languages from"../../../common/languages.js";import{ILanguageFeaturesService}from"../../../common/services/languageFeatures.js";import{ParameterHintsModel}from"./parameterHintsModel.js";import{Context}from"./provideSignatureHelp.js";import*as nls from"../../../../nls.js";import{ContextKeyExpr}from"../../../../platform/contextkey/common/contextkey.js";import{IInstantiationService}from"../../../../platform/instantiation/common/instantiation.js";import{ParameterHintsWidget}from"./parameterHintsWidget.js";let ParameterHintsController=class e extends Disposable{static get(t){return t.getContribution(e.ID)}constructor(e,t,r){super(),this.editor=e,this.model=this._register(new ParameterHintsModel(e,r.signatureHelpProvider)),this._register(this.model.onChangedHints((e=>{var t;e?(this.widget.value.show(),this.widget.value.render(e)):null===(t=this.widget.rawValue)||void 0===t||t.hide()}))),this.widget=new Lazy((()=>this._register(t.createInstance(ParameterHintsWidget,this.editor,this.model))))}cancel(){this.model.cancel()}previous(){var e;null===(e=this.widget.rawValue)||void 0===e||e.previous()}next(){var e;null===(e=this.widget.rawValue)||void 0===e||e.next()}trigger(e){this.model.trigger(e,0)}};ParameterHintsController.ID="editor.controller.parameterHints",ParameterHintsController=__decorate([__param(1,IInstantiationService),__param(2,ILanguageFeaturesService)],ParameterHintsController);export class TriggerParameterHintsAction extends EditorAction{constructor(){super({id:"editor.action.triggerParameterHints",label:nls.localize("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:EditorContextKeys.hasSignatureHelpProvider,kbOpts:{kbExpr:EditorContextKeys.editorTextFocus,primary:3082,weight:100}})}run(e,t){const r=ParameterHintsController.get(t);null==r||r.trigger({triggerKind:languages.SignatureHelpTriggerKind.Invoke})}}registerEditorContribution(ParameterHintsController.ID,ParameterHintsController,2),registerEditorAction(TriggerParameterHintsAction);const weight=175,ParameterHintsCommand=EditorCommand.bindToContribution(ParameterHintsController.get);registerEditorCommand(new ParameterHintsCommand({id:"closeParameterHints",precondition:Context.Visible,handler:e=>e.cancel(),kbOpts:{weight:175,kbExpr:EditorContextKeys.focus,primary:9,secondary:[1033]}})),registerEditorCommand(new ParameterHintsCommand({id:"showPrevParameterHint",precondition:ContextKeyExpr.and(Context.Visible,Context.MultipleSignatures),handler:e=>e.previous(),kbOpts:{weight:175,kbExpr:EditorContextKeys.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),registerEditorCommand(new ParameterHintsCommand({id:"showNextParameterHint",precondition:ContextKeyExpr.and(Context.Visible,Context.MultipleSignatures),handler:e=>e.next(),kbOpts:{weight:175,kbExpr:EditorContextKeys.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));