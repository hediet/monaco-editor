import"./marginDecorations.css";import{DecorationToRender,DedupOverlay}from"../glyphMargin/glyphMargin.js";export class MarginViewLineDecorationsOverlay extends DedupOverlay{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const n=e.getDecorationsInViewport(),r=[];let t=0;for(let e=0,s=n.length;e<s;e++){const s=n[e],o=s.options.marginClassName;o&&(r[t++]=new DecorationToRender(s.range.startLineNumber,s.range.endLineNumber,o))}return r}prepareRender(e){const n=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,t=this._render(n,r,this._getDecorations(e)),s=[];for(let e=n;e<=r;e++){const r=e-n,o=t[r];let i="";for(let e=0,n=o.length;e<n;e++)i+='<div class="cmdr '+o[e]+'" style=""></div>';s[r]=i}this._renderResult=s}render(e,n){return this._renderResult?this._renderResult[n-e]:""}}