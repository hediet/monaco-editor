import*as strings from"../../../base/common/strings.js";export class CursorColumns{static _nextVisibleColumn(t,e,n){return 9===t?CursorColumns.nextRenderTabStop(e,n):strings.isFullWidthCharacter(t)||strings.isEmojiImprecise(t)?e+2:e+1}static visibleColumnFromColumn(t,e,n){const r=Math.min(e-1,t.length),s=t.substring(0,r),o=new strings.GraphemeIterator(s);let i=0;for(;!o.eol();){const t=strings.getNextCodePoint(s,r,o.offset);o.nextGraphemeLength(),i=this._nextVisibleColumn(t,i,n)}return i}static columnFromVisibleColumn(t,e,n){if(e<=0)return 1;const r=t.length,s=new strings.GraphemeIterator(t);let o=0,i=1;for(;!s.eol();){const a=strings.getNextCodePoint(t,r,s.offset);s.nextGraphemeLength();const m=this._nextVisibleColumn(a,o,n),l=s.offset+1;if(m>=e)return m-e<e-o?l:i;o=m,i=l}return r+1}static nextRenderTabStop(t,e){return t+e-t%e}static nextIndentTabStop(t,e){return t+e-t%e}static prevRenderTabStop(t,e){return Math.max(0,t-1-(t-1)%e)}static prevIndentTabStop(t,e){return Math.max(0,t-1-(t-1)%e)}}