function roundFloat(t,r){const a=Math.pow(10,r);return Math.round(t*a)/a}export class RGBA{constructor(t,r,a,e=1){this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,t)),this.g=0|Math.min(255,Math.max(0,r)),this.b=0|Math.min(255,Math.max(0,a)),this.a=roundFloat(Math.max(Math.min(1,e),0),3)}static equals(t,r){return t.r===r.r&&t.g===r.g&&t.b===r.b&&t.a===r.a}}export class HSLA{constructor(t,r,a,e){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,t),0),this.s=roundFloat(Math.max(Math.min(1,r),0),3),this.l=roundFloat(Math.max(Math.min(1,a),0),3),this.a=roundFloat(Math.max(Math.min(1,e),0),3)}static equals(t,r){return t.h===r.h&&t.s===r.s&&t.l===r.l&&t.a===r.a}static fromRGBA(t){const r=t.r/255,a=t.g/255,e=t.b/255,n=t.a,o=Math.max(r,a,e),s=Math.min(r,a,e);let h=0,i=0;const u=(s+o)/2,l=o-s;if(l>0){switch(i=Math.min(u<=.5?l/(2*u):l/(2-2*u),1),o){case r:h=(a-e)/l+(a<e?6:0);break;case a:h=(e-r)/l+2;break;case e:h=(r-a)/l+4}h*=60,h=Math.round(h)}return new HSLA(h,i,u,n)}static _hue2rgb(t,r,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+6*(r-t)*a:a<.5?r:a<2/3?t+(r-t)*(2/3-a)*6:t}static toRGBA(t){const r=t.h/360,{s:a,l:e,a:n}=t;let o,s,h;if(0===a)o=s=h=e;else{const t=e<.5?e*(1+a):e+a-e*a,n=2*e-t;o=HSLA._hue2rgb(n,t,r+1/3),s=HSLA._hue2rgb(n,t,r),h=HSLA._hue2rgb(n,t,r-1/3)}return new RGBA(Math.round(255*o),Math.round(255*s),Math.round(255*h),n)}}export class HSVA{constructor(t,r,a,e){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,t),0),this.s=roundFloat(Math.max(Math.min(1,r),0),3),this.v=roundFloat(Math.max(Math.min(1,a),0),3),this.a=roundFloat(Math.max(Math.min(1,e),0),3)}static equals(t,r){return t.h===r.h&&t.s===r.s&&t.v===r.v&&t.a===r.a}static fromRGBA(t){const r=t.r/255,a=t.g/255,e=t.b/255,n=Math.max(r,a,e),o=n-Math.min(r,a,e),s=0===n?0:o/n;let h;return h=0===o?0:n===r?((a-e)/o%6+6)%6:n===a?(e-r)/o+2:(r-a)/o+4,new HSVA(Math.round(60*h),s,n,t.a)}static toRGBA(t){const{h:r,s:a,v:e,a:n}=t,o=e*a,s=o*(1-Math.abs(r/60%2-1)),h=e-o;let[i,u,l]=[0,0,0];return r<60?(i=o,u=s):r<120?(i=s,u=o):r<180?(u=o,l=s):r<240?(u=s,l=o):r<300?(i=s,l=o):r<=360&&(i=o,l=s),i=Math.round(255*(i+h)),u=Math.round(255*(u+h)),l=Math.round(255*(l+h)),new RGBA(i,u,l,n)}}class Color{static fromHex(t){return Color.Format.CSS.parseHex(t)||Color.red}static equals(t,r){return!t&&!r||!(!t||!r)&&t.equals(r)}get hsla(){return this._hsla?this._hsla:HSLA.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:HSVA.fromRGBA(this.rgba)}constructor(t){if(!t)throw new Error("Color needs a value");if(t instanceof RGBA)this.rgba=t;else if(t instanceof HSLA)this._hsla=t,this.rgba=HSLA.toRGBA(t);else{if(!(t instanceof HSVA))throw new Error("Invalid color ctor argument");this._hsva=t,this.rgba=HSVA.toRGBA(t)}}equals(t){return!!t&&RGBA.equals(this.rgba,t.rgba)&&HSLA.equals(this.hsla,t.hsla)&&HSVA.equals(this.hsva,t.hsva)}getRelativeLuminance(){return roundFloat(.2126*Color._relativeLuminanceForComponent(this.rgba.r)+.7152*Color._relativeLuminanceForComponent(this.rgba.g)+.0722*Color._relativeLuminanceForComponent(this.rgba.b),4)}static _relativeLuminanceForComponent(t){const r=t/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}isLighter(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128}isLighterThan(t){return this.getRelativeLuminance()>t.getRelativeLuminance()}isDarkerThan(t){return this.getRelativeLuminance()<t.getRelativeLuminance()}lighten(t){return new Color(new HSLA(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*t,this.hsla.a))}darken(t){return new Color(new HSLA(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*t,this.hsla.a))}transparent(t){const{r,g:a,b:e,a:n}=this.rgba;return new Color(new RGBA(r,a,e,n*t))}isTransparent(){return 0===this.rgba.a}isOpaque(){return 1===this.rgba.a}opposite(){return new Color(new RGBA(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}toString(){return this._toString||(this._toString=Color.Format.CSS.format(this)),this._toString}static getLighterColor(t,r,a){if(t.isLighterThan(r))return t;a=a||.5;const e=t.getRelativeLuminance(),n=r.getRelativeLuminance();return a=a*(n-e)/n,t.lighten(a)}static getDarkerColor(t,r,a){if(t.isDarkerThan(r))return t;a=a||.5;const e=t.getRelativeLuminance();return a=a*(e-r.getRelativeLuminance())/e,t.darken(a)}}Color.white=new Color(new RGBA(255,255,255,1)),Color.black=new Color(new RGBA(0,0,0,1)),Color.red=new Color(new RGBA(255,0,0,1)),Color.blue=new Color(new RGBA(0,0,255,1)),Color.green=new Color(new RGBA(0,255,0,1)),Color.cyan=new Color(new RGBA(0,255,255,1)),Color.lightgrey=new Color(new RGBA(211,211,211,1)),Color.transparent=new Color(new RGBA(0,0,0,0));export{Color};!function(t){let r;!function(r){let a;!function(r){function a(t){const r=t.toString(16);return 2!==r.length?"0"+r:r}function e(t){switch(t){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}r.formatRGB=function(r){return 1===r.rgba.a?`rgb(${r.rgba.r}, ${r.rgba.g}, ${r.rgba.b})`:t.Format.CSS.formatRGBA(r)},r.formatRGBA=function(t){return`rgba(${t.rgba.r}, ${t.rgba.g}, ${t.rgba.b}, ${+t.rgba.a.toFixed(2)})`},r.formatHSL=function(r){return 1===r.hsla.a?`hsl(${r.hsla.h}, ${(100*r.hsla.s).toFixed(2)}%, ${(100*r.hsla.l).toFixed(2)}%)`:t.Format.CSS.formatHSLA(r)},r.formatHSLA=function(t){return`hsla(${t.hsla.h}, ${(100*t.hsla.s).toFixed(2)}%, ${(100*t.hsla.l).toFixed(2)}%, ${t.hsla.a.toFixed(2)})`},r.formatHex=function(t){return`#${a(t.rgba.r)}${a(t.rgba.g)}${a(t.rgba.b)}`},r.formatHexA=function(r,e=!1){return e&&1===r.rgba.a?t.Format.CSS.formatHex(r):`#${a(r.rgba.r)}${a(r.rgba.g)}${a(r.rgba.b)}${a(Math.round(255*r.rgba.a))}`},r.format=function(r){return r.isOpaque()?t.Format.CSS.formatHex(r):t.Format.CSS.formatRGBA(r)},r.parseHex=function(r){const a=r.length;if(0===a)return null;if(35!==r.charCodeAt(0))return null;if(7===a){const a=16*e(r.charCodeAt(1))+e(r.charCodeAt(2)),n=16*e(r.charCodeAt(3))+e(r.charCodeAt(4)),o=16*e(r.charCodeAt(5))+e(r.charCodeAt(6));return new t(new RGBA(a,n,o,1))}if(9===a){const a=16*e(r.charCodeAt(1))+e(r.charCodeAt(2)),n=16*e(r.charCodeAt(3))+e(r.charCodeAt(4)),o=16*e(r.charCodeAt(5))+e(r.charCodeAt(6)),s=16*e(r.charCodeAt(7))+e(r.charCodeAt(8));return new t(new RGBA(a,n,o,s/255))}if(4===a){const a=e(r.charCodeAt(1)),n=e(r.charCodeAt(2)),o=e(r.charCodeAt(3));return new t(new RGBA(16*a+a,16*n+n,16*o+o))}if(5===a){const a=e(r.charCodeAt(1)),n=e(r.charCodeAt(2)),o=e(r.charCodeAt(3)),s=e(r.charCodeAt(4));return new t(new RGBA(16*a+a,16*n+n,16*o+o,(16*s+s)/255))}return null}}(a=r.CSS||(r.CSS={}))}(r=t.Format||(t.Format={}))}(Color||(Color={}));