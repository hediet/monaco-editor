var __awaiter=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function r(t){try{l(s.next(t))}catch(t){o(t)}}function a(t){try{l(s.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,a)}l((s=s.apply(t,e||[])).next())}))};import{Emitter}from"./event.js";import{Disposable}from"./lifecycle.js";import*as nls from"../../nls.js";export class Action extends Disposable{constructor(t,e="",i="",s=!0,n){super(),this._onDidChange=this._register(new Emitter),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=t,this._label=e,this._cssClass=i,this._enabled=s,this._actionCallback=n}get id(){return this._id}get label(){return this._label}set label(t){this._setLabel(t)}_setLabel(t){this._label!==t&&(this._label=t,this._onDidChange.fire({label:t}))}get tooltip(){return this._tooltip||""}set tooltip(t){this._setTooltip(t)}_setTooltip(t){this._tooltip!==t&&(this._tooltip=t,this._onDidChange.fire({tooltip:t}))}get class(){return this._cssClass}set class(t){this._setClass(t)}_setClass(t){this._cssClass!==t&&(this._cssClass=t,this._onDidChange.fire({class:t}))}get enabled(){return this._enabled}set enabled(t){this._setEnabled(t)}_setEnabled(t){this._enabled!==t&&(this._enabled=t,this._onDidChange.fire({enabled:t}))}get checked(){return this._checked}set checked(t){this._setChecked(t)}_setChecked(t){this._checked!==t&&(this._checked=t,this._onDidChange.fire({checked:t}))}run(t,e){return __awaiter(this,void 0,void 0,(function*(){this._actionCallback&&(yield this._actionCallback(t))}))}}export class ActionRunner extends Disposable{constructor(){super(...arguments),this._onWillRun=this._register(new Emitter),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new Emitter),this.onDidRun=this._onDidRun.event}run(t,e){return __awaiter(this,void 0,void 0,(function*(){if(!t.enabled)return;let i;this._onWillRun.fire({action:t});try{yield this.runAction(t,e)}catch(t){i=t}this._onDidRun.fire({action:t,error:i})}))}runAction(t,e){return __awaiter(this,void 0,void 0,(function*(){yield t.run(e)}))}}class Separator{constructor(){this.id=Separator.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let e=[];for(const i of t)i.length&&(e=e.length?[...e,new Separator,...i]:i);return e}run(){return __awaiter(this,void 0,void 0,(function*(){}))}}Separator.ID="vs.actions.separator";export{Separator};export class SubmenuAction{get actions(){return this._actions}constructor(t,e,i,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=t,this.label=e,this.class=s,this._actions=i}run(){return __awaiter(this,void 0,void 0,(function*(){}))}}class EmptySubmenuAction extends Action{constructor(){super(EmptySubmenuAction.ID,nls.localize("submenu.empty","(empty)"),void 0,!1)}}EmptySubmenuAction.ID="vs.actions.empty";export{EmptySubmenuAction};export function toAction(t){var e,i;return{id:t.id,label:t.label,class:void 0,enabled:null===(e=t.enabled)||void 0===e||e,checked:null!==(i=t.checked)&&void 0!==i&&i,run:()=>__awaiter(this,void 0,void 0,(function*(){return t.run()})),tooltip:t.label}}