import{posix,sep}from"./path.js";import{isWindows}from"./platform.js";import{startsWithIgnoreCase}from"./strings.js";export function isPathSeparator(t){return 47===t||92===t}export function toSlashes(t){return t.replace(/[\\/]/g,posix.sep)}export function toPosixPath(t){return-1===t.indexOf("/")&&(t=toSlashes(t)),/^[a-zA-Z]:(\/|$)/.test(t)&&(t="/"+t),t}export function getRoot(t,r=posix.sep){if(!t)return"";const e=t.length,i=t.charCodeAt(0);if(isPathSeparator(i)){if(isPathSeparator(t.charCodeAt(1))&&!isPathSeparator(t.charCodeAt(2))){let i=3;const o=i;for(;i<e&&!isPathSeparator(t.charCodeAt(i));i++);if(o!==i&&!isPathSeparator(t.charCodeAt(i+1)))for(i+=1;i<e;i++)if(isPathSeparator(t.charCodeAt(i)))return t.slice(0,i+1).replace(/[\\/]/g,r)}return r}if(isWindowsDriveLetter(i)&&58===t.charCodeAt(1))return isPathSeparator(t.charCodeAt(2))?t.slice(0,2)+r:t.slice(0,2);let o=t.indexOf("://");if(-1!==o)for(o+=3;o<e;o++)if(isPathSeparator(t.charCodeAt(o)))return t.slice(0,o+1);return""}export function isEqualOrParent(t,r,e,i=sep){if(t===r)return!0;if(!t||!r)return!1;if(r.length>t.length)return!1;if(e){if(!startsWithIgnoreCase(t,r))return!1;if(r.length===t.length)return!0;let e=r.length;return r.charAt(r.length-1)===i&&e--,t.charAt(e)===i}return r.charAt(r.length-1)!==i&&(r+=i),0===t.indexOf(r)}export function isWindowsDriveLetter(t){return t>=65&&t<=90||t>=97&&t<=122}export function hasDriveLetter(t,r=isWindows){return!!r&&isWindowsDriveLetter(t.charCodeAt(0))&&58===t.charCodeAt(1)}