var __decorate=this&&this.__decorate||function(e,i,r,c){var t,s=arguments.length,o=s<3?i:null===c?c=Object.getOwnPropertyDescriptor(i,r):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,i,r,c);else for(var n=e.length-1;n>=0;n--)(t=e[n])&&(o=(s<3?t(o):s>3?t(i,r,o):t(i,r))||o);return s>3&&o&&Object.defineProperty(i,r,o),o},__param=this&&this.__param||function(e,i){return function(r,c){i(r,c,e)}};import{localize}from"../../../nls.js";import{Registry}from"../../registry/common/platform.js";import{DisposableStore}from"../../../base/common/lifecycle.js";import{IKeybindingService}from"../../keybinding/common/keybinding.js";import{Extensions}from"../common/quickAccess.js";import{IQuickInputService}from"../common/quickInput.js";let HelpQuickAccessProvider=class e{constructor(e,i){this.quickInputService=e,this.keybindingService=i,this.registry=Registry.as(Extensions.Quickaccess)}provide(i){const r=new DisposableStore;return r.add(i.onDidAccept((()=>{const[e]=i.selectedItems;e&&this.quickInputService.quickAccess.show(e.prefix,{preserveValue:!0})}))),r.add(i.onDidChangeValue((i=>{const r=this.registry.getQuickAccessProvider(i.substr(e.PREFIX.length));r&&r.prefix&&r.prefix!==e.PREFIX&&this.quickInputService.quickAccess.show(r.prefix,{preserveValue:!0})}))),i.items=this.getQuickAccessProviders().filter((i=>i.prefix!==e.PREFIX)),r}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort(((e,i)=>e.prefix.localeCompare(i.prefix))).flatMap((e=>this.createPicks(e)))}createPicks(e){return e.helpEntries.map((i=>{const r=i.prefix||e.prefix,c=r||"â€¦";return{prefix:r,label:c,keybinding:i.commandId?this.keybindingService.lookupKeybinding(i.commandId):void 0,ariaLabel:localize("helpPickAriaLabel","{0}, {1}",c,i.description),description:i.description}}))}};HelpQuickAccessProvider.PREFIX="?",HelpQuickAccessProvider=__decorate([__param(0,IQuickInputService),__param(1,IKeybindingService)],HelpQuickAccessProvider);export{HelpQuickAccessProvider};