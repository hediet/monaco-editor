import{asCSSPropertyValue,asCSSUrl}from"../../../base/browser/dom.js";import{Emitter}from"../../../base/common/event.js";import{ThemeIcon}from"../../../base/common/themables.js";import{getIconRegistry}from"../common/iconRegistry.js";export function getIconsStyleSheet(e){const o=new Emitter,t=getIconRegistry();return t.onDidChange((()=>o.fire())),null==e||e.onDidProductIconThemeChange((()=>o.fire())),{onDidChange:o.event,getCSS(){const o=e?e.getProductIconTheme():new UnthemedProductIconTheme,n={},r=e=>{const t=o.getIcon(e);if(!t)return;const r=t.font;return r?(n[r.id]=r.definition,`.codicon-${e.id}:before { content: '${t.fontCharacter}'; font-family: ${asCSSPropertyValue(r.id)}; }`):`.codicon-${e.id}:before { content: '${t.fontCharacter}'; }`},c=[];for(const e of t.getIcons()){const o=r(e);o&&c.push(o)}for(const e in n){const o=n[e],t=o.weight?`font-weight: ${o.weight};`:"",r=o.style?`font-style: ${o.style};`:"",s=o.src.map((e=>`${asCSSUrl(e.location)} format('${e.format}')`)).join(", ");c.push(`@font-face { src: ${s}; font-family: ${asCSSPropertyValue(e)};${t}${r} font-display: block; }`)}return c.join("\n")}}}export class UnthemedProductIconTheme{getIcon(e){const o=getIconRegistry();let t=e.defaults;for(;ThemeIcon.isThemeIcon(t);){const e=o.getIcon(t.id);if(!e)return;t=e.defaults}return t}}