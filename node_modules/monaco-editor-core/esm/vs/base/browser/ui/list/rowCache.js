import{$}from"../../dom.js";function removeFromParent(e){var t;try{null===(t=e.parentElement)||void 0===t||t.removeChild(e)}catch(e){}}export class RowCache{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const r=$(".monaco-list-row");t={domNode:r,templateId:e,templateData:this.getRenderer(e).renderTemplate(r)}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:r}=e;t&&(t.classList.remove("scrolling"),removeFromParent(t)),this.getTemplateCache(r).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach(((e,t)=>{for(const r of e)this.getRenderer(t).disposeTemplate(r.templateData),r.templateData=null})),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}